apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: couchbasebuckets.couchbase.com
spec:
  additionalPrinterColumns:
  - JSONPath: .spec.memoryQuota
    description: Maximum memory size in MiB of the bucket
    name: Memory Quota
    type: string
  - JSONPath: .spec.replicas
    description: Number of document replications
    name: Replicas
    type: integer
  - JSONPath: .spec.ioPriority
    description: IO Priority
    name: IO Priority
    type: string
  - JSONPath: .spec.evictionPolicy
    description: Policy used to evict documents from memory onto storage
    name: Eviction Policy
    type: string
  - JSONPath: .spec.conflictResolution
    description: How to choose a winner when document revisions collide
    name: Conflict resolution
    type: string
  - JSONPath: .metadata.creationTimestamp
    name: Age
    type: date
  group: couchbase.com
  names:
    categories:
    - all
    - couchbase
    kind: CouchbaseBucket
    plural: couchbasebuckets
  scope: Namespaced
  validation:
    openAPIV3Schema:
      properties:
        spec:
          properties:
            compressionMode:
              pattern: ^off|passive|active$
              type: string
            conflictResolution:
              pattern: ^seqno|lww$
              type: string
            enableFlush:
              type: boolean
            enableIndexReplica:
              type: boolean
            evictionPolicy:
              pattern: ^valueOnly|fullEviction$
              type: string
            ioPriority:
              pattern: ^high|low$
              type: string
            memoryQuota:
              type: string
            name:
              maxLength: 100
              pattern: ^[a-zA-Z0-9-_%\.]+$
              type: string
            replicas:
              maximum: 3
              minimum: 0
              type: integer
          required:
          - memoryQuota
          - ioPriority
          - evictionPolicy
          - conflictResolution
          - compressionMode
          type: object
      type: object
  versions:
  - name: v1
    served: false
    storage: false
  - name: v2
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: couchbaseephemeralbuckets.couchbase.com
spec:
  additionalPrinterColumns:
  - JSONPath: .spec.memoryQuota
    description: Maximum memory size in MiB of the bucket
    name: Memory Quota
    type: string
  - JSONPath: .spec.replicas
    description: Number of document replications
    name: Replicas
    type: integer
  - JSONPath: .spec.ioPriority
    description: IO Priority
    name: IO Priority
    type: string
  - JSONPath: .spec.evictionPolicy
    description: Policy used to evict documents from memory onto storage
    name: Eviction Policy
    type: string
  - JSONPath: .spec.conflictResolution
    description: How to choose a winner when document revisions collide
    name: Conflict resolution
    type: string
  - JSONPath: .metadata.creationTimestamp
    name: Age
    type: date
  group: couchbase.com
  names:
    categories:
    - all
    - couchbase
    kind: CouchbaseEphemeralBucket
    plural: couchbaseephemeralbuckets
  scope: Namespaced
  validation:
    openAPIV3Schema:
      properties:
        spec:
          properties:
            compressionMode:
              pattern: ^off|passive|active$
              type: string
            conflictResolution:
              pattern: ^seqno|lww$
              type: string
            enableFlush:
              type: boolean
            evictionPolicy:
              pattern: ^noEviction|nruEviction$
              type: string
            ioPriority:
              pattern: ^high|low$
              type: string
            memoryQuota:
              type: string
            name:
              maxLength: 100
              pattern: ^[a-zA-Z0-9-_%\.]+$
              type: string
            replicas:
              maximum: 3
              minimum: 0
              type: integer
          required:
          - memoryQuota
          - ioPriority
          - evictionPolicy
          - conflictResolution
          - compressionMode
          type: object
      type: object
  versions:
  - name: v1
    served: false
    storage: false
  - name: v2
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: couchbasememcachedbuckets.couchbase.com
spec:
  additionalPrinterColumns:
  - JSONPath: .spec.memoryQuota
    description: Maximum memory size in MiB of the bucket
    name: Memory Quota
    type: string
  - JSONPath: .metadata.creationTimestamp
    name: Age
    type: date
  group: couchbase.com
  names:
    categories:
    - all
    - couchbase
    kind: CouchbaseMemcachedBucket
    plural: couchbasememcachedbuckets
  scope: Namespaced
  validation:
    openAPIV3Schema:
      properties:
        spec:
          properties:
            enableFlush:
              type: boolean
            memoryQuota:
              type: string
            name:
              maxLength: 100
              pattern: ^[a-zA-Z0-9-_%\.]+$
              type: string
          required:
          - memoryQuota
          type: object
      type: object
  versions:
  - name: v1
    served: false
    storage: false
  - name: v2
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: couchbasereplications.couchbase.com
spec:
  additionalPrinterColumns:
  - JSONPath: .spec.bucket
    description: Bucket to replicate from
    name: Bucket
    type: string
  - JSONPath: .spec.bucket
    description: Bucket to replicate to
    name: Remote Bucket
    type: string
  - JSONPath: .spec.paused
    description: Whether the replication is paused
    name: Paused
    type: boolean
  - JSONPath: .metadata.creationTimestamp
    name: Age
    type: date
  group: couchbase.com
  names:
    categories:
    - all
    - couchbase
    kind: CouchbaseReplication
    plural: couchbasereplications
  scope: Namespaced
  validation:
    openAPIV3Schema:
      properties:
        spec:
          properties:
            bucket:
              type: string
            compressionType:
              pattern: ^None|Auto|Snappy$
              type: string
            filterExpression:
              type: string
            paused:
              type: boolean
            remoteBucket:
              type: string
          required:
          - bucket
          - remoteBucket
          - compressionType
          type: object
      type: object
  versions:
  - name: v1
    served: false
    storage: false
  - name: v2
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: couchbaseusers.couchbase.com
spec:
  group: couchbase.com
  names:
    categories:
    - all
    - couchbase
    kind: CouchbaseUser
    plural: couchbaseusers
  scope: Namespaced
  validation:
    openAPIV3Schema:
      properties:
        spec:
          properties:
            authDomain:
              pattern: ^local|external$
              type: string
            authSecret:
              type: string
            fullName:
              type: string
          required:
          - authDomain
          type: object
      type: object
  versions:
  - name: v1
    served: false
    storage: false
  - name: v2
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: couchbasegroups.couchbase.com
spec:
  group: couchbase.com
  names:
    categories:
    - all
    - couchbase
    kind: CouchbaseGroup
    plural: couchbasegroups
  scope: Namespaced
  validation:
    openAPIV3Schema:
      properties:
        spec:
          properties:
            ldapGroupRef:
              type: string
            roles:
              items:
                properties:
                  bucket:
                    maxLength: 100
                    pattern: ^\*$|^[a-zA-Z0-9-_%\.]+$
                    type: string
                  name:
                    minLength: 1
                    pattern: ^admin$|^cluster_admin$|^security_admin$|^ro_admin$|^replication_admin$|^query_external_access$|^query_system_catalog$|^analytics_reader$|^bucket_admin$|^views_admin$|^fts_admin$|^bucket_full_access$|^data_reader$|^data_writer$|^data_dcp_reader$|^data_backup$|^data_monitoring$|^replication_target$|^analytics_manager$|^views_reader$|^fts_searcher$|^query_select$|^query_update$|^query_insert$|^query_delete$|^query_manage_index$
                    type: string
                required:
                - name
                type: object
              minLength: 1
              type: array
          required:
          - roles
          type: object
  versions:
  - name: v1
    served: false
    storage: false
  - name: v2
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: couchbaserolebindings.couchbase.com
spec:
  group: couchbase.com
  names:
    categories:
    - all
    - couchbase
    kind: CouchbaseRoleBinding
    plural: couchbaserolebindings
  scope: Namespaced
  validation:
    openAPIV3Schema:
      properties:
        spec:
          properties:
            roleRef:
              properties:
                kind:
                  type: string
                name:
                  minLength: 1
                  type: string
              required:
              - name
              type: object
            subjects:
              items:
                properties:
                  kind:
                    pattern: ^CouchbaseUser$
                    type: string
                  name:
                    minLength: 1
                    type: string
                required:
                - name
                - kind
                type: object
              minLength: 1
              type: array
          required:
          - subjects
          - roleRef
          type: object
      type: object
  versions:
  - name: v1
    served: false
    storage: false
  - name: v2
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: couchbaseclusters.couchbase.com
spec:
  additionalPrinterColumns:
  - JSONPath: .status.currentVersion
    description: Couchbase version
    name: Version
    type: string
  - JSONPath: .status.size
    description: Cluster size
    name: Size
    type: string
  - JSONPath: .status.phase
    description: Cluster status
    name: Status
    type: string
  - JSONPath: .status.clusterId
    description: Cluster UUID
    name: UUID
    type: string
  - JSONPath: .metadata.creationTimestamp
    name: Age
    type: date
  group: couchbase.com
  names:
    categories:
    - all
    - couchbase
    kind: CouchbaseCluster
    plural: couchbaseclusters
    shortNames:
    - cbc
  scope: Namespaced
  validation:
    openAPIV3Schema:
      properties:
        spec:
          properties:
            antiAffinity:
              type: boolean
            backup:
              properties:
                image:
                  type: string
                managed:
                  type: boolean
                resources:
                  properties:
                    limits:
                      properties:
                        cpu:
                          type: string
                        memory:
                          type: string
                      type: object
                    requests:
                      properties:
                        cpu:
                          type: string
                        memory:
                          type: string
                      type: object
                  type: object
                serviceAccountName:
                  minLength: 1
                  type: string
              type: object
            buckets:
              properties:
                managed:
                  type: boolean
                selector:
                  type: object
              type: object
            cluster:
              properties:
                analyticsServiceMemoryQuota:
                  type: string
                autoCompaction:
                  properties:
                    databaseFragmentationThreshold:
                      properties:
                        percent:
                          maximum: 100
                          minimum: 2
                          type: integer
                        size:
                          type: string
                      type: object
                    parallelCompaction:
                      type: boolean
                    timeWindow:
                      properties:
                        abortCompactionOutsideWindow:
                          type: boolean
                        end:
                          pattern: ^(2[0-3]|[01]?[0-9]):([0-5]?[0-9])$
                          type: string
                        start:
                          pattern: ^(2[0-3]|[01]?[0-9]):([0-5]?[0-9])$
                          type: string
                      type: object
                    tombstonePurgeInterval:
                      type: string
                    viewFragmentationThreshold:
                      properties:
                        percent:
                          maximum: 100
                          minimum: 2
                          type: integer
                        size:
                          type: string
                      type: object
                  type: object
                autoFailoverMaxCount:
                  maximum: 3
                  minimum: 1
                  type: integer
                autoFailoverOnDataDiskIssues:
                  type: boolean
                autoFailoverOnDataDiskIssuesTimePeriod:
                  type: string
                autoFailoverServerGroup:
                  type: boolean
                autoFailoverTimeout:
                  type: string
                clusterName:
                  type: string
                dataServiceMemoryQuota:
                  type: string
                eventingServiceMemoryQuota:
                  type: string
                indexServiceMemoryQuota:
                  type: string
                indexStorageSetting:
                  pattern: ^plasma|memory_optimized$
                  type: string
                searchServiceMemoryQuota:
                  type: string
              required:
              - dataServiceMemoryQuota
              - indexServiceMemoryQuota
              - searchServiceMemoryQuota
              - eventingServiceMemoryQuota
              - analyticsServiceMemoryQuota
              - indexStorageSetting
              - autoFailoverTimeout
              - autoFailoverMaxCount
              type: object
            image:
              pattern: ^(.*?(:\d+)?/)?.*?/.*?(:.*?\d+\.\d+\.\d+.*|@sha256:[0-9a-f]{64})$
              type: string
            logging:
              properties:
                logRetentionCount:
                  minimum: 0
                  type: integer
                logRetentionTime:
                  pattern: ^\d+(ns|us|ms|s|m|h)$
                  type: string
              type: object
            monitoring:
              properties:
                prometheus:
                  properties:
                    authorizationSecret:
                      type: string
                    enabled:
                      type: boolean
                    image:
                      pattern: ^(.*?(:\d+)?/)?.*?/.*?(:.*?\d+\.\d+\.\d+.*|@sha256:[0-9a-f]{64})$
                      type: string
                    resources:
                      properties:
                        limits:
                          properties:
                            cpu:
                              type: string
                            memory:
                              type: string
                          type: object
                        requests:
                          properties:
                            cpu:
                              type: string
                            memory:
                              type: string
                          type: object
                      type: object
                  type: object
              type: object
            networking:
              properties:
                adminConsoleServiceType:
                  pattern: ^NodePort|LoadBalancer$
                  type: string
                adminConsoleServices:
                  items:
                    pattern: ^data|index|query|search|eventing|analytics$
                    type: string
                  type: array
                dns:
                  properties:
                    domain:
                      type: string
                  required:
                  - domain
                  type: object
                exposeAdminConsole:
                  type: boolean
                exposedFeatureServiceType:
                  pattern: ^NodePort|LoadBalancer$
                  type: string
                exposedFeatureTrafficPolicy:
                  pattern: ^Cluster|Local$
                  type: string
                exposedFeatures:
                  items:
                    pattern: ^admin|xdcr|client$
                    type: string
                  type: array
                loadBalancerSourceRanges:
                  items:
                    pattern: ^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/\d{1,2}$
                    type: string
                  type: array
                serviceAnnotations:
                  type: object
                tls:
                  properties:
                    clientCertificatePaths:
                      items:
                        properties:
                          delimiter:
                            type: string
                          path:
                            pattern: ^subject\.cn|san\.uri|san\.dnsname|san\.email$
                            type: string
                          prefix:
                            type: string
                        required:
                        - path
                        type: object
                      type: array
                    clientCertificatePolicy:
                      pattern: ^enable|mandatory$
                      type: string
                    nodeToNodeEncryption:
                      pattern: ^(All|ControlPlaneOnly)$
                      type: string
                    static:
                      properties:
                        operatorSecret:
                          type: string
                        serverSecret:
                          type: string
                      required:
                      - serverSecret
                      - operatorSecret
                      type: object
                  required:
                  - static
                  type: object
              type: object
            paused:
              type: boolean
            platform:
              pattern: ^aws|gce|azure$
              type: string
            security:
              properties:
                adminSecret:
                  minLength: 1
                  type: string
                ldap:
                  properties:
                    authenticationEnabled:
                      type: boolean
                    authorizationEnabled:
                      type: boolean
                    bindDN:
                      type: string
                    bindSecret:
                      type: string
                    cacheValueLifetime:
                      type: integer
                    encryption:
                      pattern: ^None|StartTLSExtension|TLS$
                      type: string
                    groupsQuery:
                      type: string
                    hosts:
                      items:
                        type: string
                      type: array
                    nestedGroupsEnabled:
                      type: boolean
                    nestedGroupsMaxDepth:
                      type: integer
                    port:
                      type: integer
                    serverCertValidation:
                      type: boolean
                    tlsSecret:
                      type: string
                    userDNMapping:
                      properties:
                        template:
                          type: string
                      required:
                      - template
                      type: object
                  required:
                  - hosts
                  type: object
                rbac:
                  properties:
                    managed:
                      type: boolean
                    selector:
                      type: object
                  type: object
              required:
              - adminSecret
              type: object
            securityContext:
              type: object
            serverGroups:
              items:
                type: string
              type: array
            servers:
              items:
                properties:
                  env:
                    items:
                      properties:
                        name:
                          type: string
                        value:
                          type: string
                      type: object
                    type: array
                  envFrom:
                    type: object
                  name:
                    minLength: 1
                    pattern: ^[-_a-zA-Z0-9]+$
                    type: string
                  pod:
                    properties:
                      metadata:
                        properties:
                          annotations:
                            type: object
                          labels:
                            type: object
                        type: object
                      spec:
                        properties:
                          automountServiceAccountToken:
                            type: boolean
                          dnsConfig:
                            type: object
                          dnsPolicy:
                            pattern: ^None$
                            type: string
                          imagePullSecrets:
                            items:
                              type: object
                            type: array
                          nodeSelector:
                            type: object
                          tolerations:
                            items:
                              properties:
                                effect:
                                  type: string
                                key:
                                  type: string
                                operator:
                                  type: string
                                tolerationSeconds:
                                  type: integer
                                value:
                                  type: string
                              required:
                              - key
                              - operator
                              - value
                              - effect
                              type: object
                            type: array
                        type: object
                    type: object
                  resources:
                    properties:
                      limits:
                        properties:
                          cpu:
                            type: string
                          memory:
                            type: string
                        type: object
                      requests:
                        properties:
                          cpu:
                            type: string
                          memory:
                            type: string
                        type: object
                    type: object
                  serverGroups:
                    items:
                      type: string
                    type: array
                  services:
                    items:
                      pattern: ^data|index|query|search|eventing|analytics$
                      type: string
                    minLength: 1
                    type: array
                  size:
                    minimum: 1
                    type: integer
                  volumeMounts:
                    properties:
                      analytics:
                        items:
                          type: string
                        type: array
                      data:
                        type: string
                      default:
                        type: string
                      index:
                        type: string
                      logs:
                        type: string
                    type: object
                required:
                - size
                - name
                - services
                type: object
              minLength: 1
              type: array
            softwareUpdateNotifications:
              type: boolean
            volumeClaimTemplates:
              items:
                properties:
                  metadata:
                    properties:
                      name:
                        type: string
                    required:
                    - name
                    type: object
                  spec:
                    properties:
                      resources:
                        properties:
                          limits:
                            properties:
                              storage:
                                type: string
                            required:
                            - storage
                            type: object
                          requests:
                            properties:
                              storage:
                                type: string
                            required:
                            - storage
                            type: object
                        type: object
                      storageClassName:
                        type: string
                    required:
                    - resources
                    type: object
                required:
                - metadata
                - spec
                type: object
              type: array
            xdcr:
              properties:
                managed:
                  type: boolean
                remoteClusters:
                  items:
                    properties:
                      authenticationSecret:
                        type: string
                      hostname:
                        pattern: ^[0-9a-zA-Z\-\.]+(:\d+)?$
                        type: string
                      name:
                        type: string
                      replications:
                        properties:
                          selector:
                            type: object
                        type: object
                      tls:
                        properties:
                          secret:
                            type: string
                        type: object
                      uuid:
                        pattern: ^[0-9a-f]{32}$
                        type: string
                    required:
                    - name
                    - uuid
                    - hostname
                    type: object
                  type: array
              type: object
          required:
          - image
          - security
          - servers
          type: object
        status:
          properties:
            adminConsolePort:
              type: string
            adminConsolePortSSL:
              type: string
            conditions:
              items:
                properties:
                  lastTransitionTime:
                    type: string
                  lastUpdateTime:
                    type: string
                  message:
                    type: string
                  reason:
                    type: string
                  status:
                    type: string
                  type:
                    type: string
                type: object
              type: array
            controlPaused:
              type: boolean
            currentVersion:
              type: string
            exposedFeatures:
              items:
                type: string
              type: array
            members:
              properties:
                ready:
                  items:
                    type: string
                  type: array
                unready:
                  items:
                    type: string
                  type: array
              type: object
            phase:
              type: string
            reason:
              type: string
            size:
              type: integer
          type: object
      type: object
  versions:
  - name: v2
    served: true
    storage: true
  - name: v1
    served: true
    storage: false
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: couchbasebackups.couchbase.com
spec:
  additionalPrinterColumns:
  - JSONPath: .spec.strategy
    description: what backup strategy is being followed
    name: Strategy
    type: string
  - JSONPath: .spec.size
    description: total size of the backup volume
    name: Volume Size
    type: string
  - JSONPath: .status.capacityUsed
    description: total size of the backup volume
    name: Capacity Used
    type: string
  - JSONPath: .status.lastRun
    description: last time backup was run
    name: Last Run
    type: string
  - JSONPath: .status.lastSuccess
    description: last time backup was successful
    name: Last Success
    type: string
  - JSONPath: .status.running
    name: Running
    type: boolean
  - JSONPath: .metadata.creationTimestamp
    name: Age
    type: date
  group: couchbase.com
  names:
    categories:
    - all
    - couchbase
    kind: CouchbaseBackup
    plural: couchbasebackups
    shortNames:
    - cbbackup
  scope: Namespaced
  validation:
    openAPIV3Schema:
      properties:
        spec:
          properties:
            backupRetention:
              pattern: ^\d+(ns|us|ms|s|m|h)$
              type: string
            failedJobsHistoryLimit:
              minimum: 0
              type: integer
            full:
              properties:
                schedule:
                  type: string
              required:
              - schedule
              type: object
            incremental:
              properties:
                schedule:
                  type: string
              required:
              - schedule
              type: object
            logRetention:
              pattern: ^\d+(ns|us|ms|s|m|h)$
              type: string
            size:
              type: string
            strategy:
              pattern: ^full_incremental|full_only$
              type: string
            successfulJobsHistoryLimit:
              minimum: 0
              type: integer
          required:
          - strategy
          type: object
        status:
          properties:
            archive:
              type: string
            backups:
              items:
                properties:
                  full:
                    type: string
                  incremental:
                    type: string
                  name:
                    type: string
                required:
                - full
                - name
                type: object
              type: array
            capacityUsed:
              type: string
            cronjob:
              type: string
            duration:
              type: string
            failed:
              type: boolean
            job:
              type: string
            lastFailure:
              type: string
            lastRun:
              type: string
            lastSuccess:
              type: string
            output:
              type: string
            pod:
              type: string
            repo:
              type: string
            running:
              type: boolean
          type: object
  versions:
  - name: v1
    served: false
    storage: false
  - name: v2
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: couchbasebackuprestores.couchbase.com
spec:
  additionalPrinterColumns:
  - JSONPath: .status.capacityUsed
    description: total size of the backup volume
    name: Capacity Used
    type: string
  - JSONPath: .status.lastRun
    description: last time backup was run
    name: Last Run
    type: string
  - JSONPath: .status.lastSuccess
    description: last time restore was successful
    name: Last Success
    type: string
  - JSONPath: .status.duration
    name: Duration
    type: string
  - JSONPath: .status.running
    name: Running
    type: boolean
  - JSONPath: .metadata.creationTimestamp
    name: Age
    type: date
  group: couchbase.com
  names:
    categories:
    - all
    - couchbase
    kind: CouchbaseBackupRestore
    plural: couchbasebackuprestores
    shortNames:
    - cbrestore
  scope: Namespaced
  validation:
    openAPIV3Schema:
      properties:
        spec:
          properties:
            backup:
              type: string
            end:
              properties:
                int:
                  minimum: 1
                  type: integer
                str:
                  type: string
              type: object
            logRetention:
              pattern: ^\d+(ns|us|ms|s|m|h)$
              type: string
            repo:
              type: string
            start:
              properties:
                int:
                  minimum: 1
                  type: integer
                str:
                  type: string
              type: object
          required:
          - backup
          - start
          type: object
        status:
          properties:
            archive:
              type: string
            backups:
              items:
                properties:
                  full:
                    type: string
                  incremental:
                    type: string
                  name:
                    type: string
                required:
                - full
                - name
                type: object
              type: array
            completed:
              type: boolean
            duration:
              type: string
            failed:
              type: boolean
            job:
              type: string
            lastFailure:
              type: string
            lastRun:
              type: string
            lastSuccess:
              type: string
            output:
              type: string
            pod:
              type: string
            repo:
              type: string
            running:
              type: boolean
          type: object
  versions:
  - name: v1
    served: false
    storage: false
  - name: v2
    served: true
    storage: true
---
apiVersion: v1
kind: ServiceAccount
metadata:
  creationTimestamp: null
  name: couchbase-operator-admission
  namespace: default

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  creationTimestamp: null
  name: couchbase-operator-admission
rules:
- apiGroups:
  - couchbase.com
  resources:
  - couchbaseclusters
  - couchbasebuckets
  - couchbaseephemeralbuckets
  - couchbasememcachedbuckets
  - couchbasereplications
  - couchbaseusers
  - couchbasegroups
  - couchbaserolebindings
  - couchbasebackups
  - couchbasebackuprestores
  verbs:
  - list
- apiGroups:
  - ""
  resources:
  - namespaces
  - secrets
  verbs:
  - get
- apiGroups:
  - storage.k8s.io
  resources:
  - storageclasses
  verbs:
  - get

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  creationTimestamp: null
  name: couchbase-operator-admission
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: couchbase-operator-admission
subjects:
- kind: ServiceAccount
  name: couchbase-operator-admission
  namespace: default

---
apiVersion: v1
data:
  tls-cert-file: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURpRENDQW5DZ0F3SUJBZ0lSQU9rd0gwWkQwQmlhek1XWVlmaWlBbVV3RFFZSktvWklodmNOQVFFTEJRQXcKS2pFb01DWUdBMVVFQXhNZlkyOTFZMmhpWVhObExXOXdaWEpoZEc5eUxXRmtiV2x6YzJsdmJpQkRRVEFlRncweQpNREE0TWpReE1qRXdNVEZhRncwek1EQTRNakl4TWpFd01URmFNQ2N4SlRBakJnTlZCQU1USEdOdmRXTm9ZbUZ6ClpTMXZjR1Z5WVhSdmNpMWhaRzFwYzNOcGIyNHdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUsKQW9JQkFRREJSV21pS2pOWSs1NHBJK0RQRFZvQUFTaE9CTEFWUzhHU01kTHNib1ZtbU84cTRTTVV2UkMvVVgrVwo4b3dFdXJXT080NmVXcjBXbjZnSGJVWVBoSnMyamJZUHlSM3RkS3YrUGk3RW5ydGZqNGlJODlYSStNRFpFVWpUClpxcCtkdENHclExWU9sWTZCSGZxSTlwQU9aS0gvVU5ldytYb0F5ajVUczlRUWhFeE1Tb285ekxHaUdhdnU1RGwKVTQzUGgrSEVyNXk3dE9oaFZFa2pjVUFrZHJmT0tXOGhZNEtTQTJyY1dJL0k2eUZ2aFd0eEt4ckZpWmIxbGpaVwpMazVpcWRuVE1TT3VyUHZKT0JBOGI1Z0p5elpOVGxZSktIMHprTDlEcHdIbWRpNFhrVnNhdTRCZVE1a0JpVFo5Cm1GbUoxUkIybW5hWnE5RlY4MnlHNTRhL04zMWZBZ01CQUFHamdhc3dnYWd3RGdZRFZSMFBBUUgvQkFRREFnV2cKTUJNR0ExVWRKUVFNTUFvR0NDc0dBUVVGQndNQk1Bd0dBMVVkRXdFQi93UUNNQUF3SFFZRFZSME9CQllFRkZ2RApxTlkzSEk5YzgyL3RvUFF0QTJLdHNTalNNQjhHQTFVZEl3UVlNQmFBRkZ1ck1JeGtscVRqRGE3U3RKcW9qaTMvCkc3YUpNRE1HQTFVZEVRUXNNQ3FDS0dOdmRXTm9ZbUZ6WlMxdmNHVnlZWFJ2Y2kxaFpHMXBjM05wYjI0dVpHVm0KWVhWc2RDNXpkbU13RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQU1NUmQ1Z1dxZXhDdzgxdFZwcGtlYXV5OE82MQp2L2laTmxHT1gxNFBQc25VcWFXQ29HNGovZkgzVWR5c3pEeEM2WGFiamhCWUwrd21jVDUvb3FmdUgyZTFLZmZECmcyU2NIOGF2ZjUwTGpRNzBPeURNVDZaZ1FvRmRCTEVqMWZlbTFWT1BBdzZZZmZYLzRMVGZEQk1MSHE2b080dWcKZlVvbmkvMjE0VlBWaGxmaXF0N1RUc1NtRVhad2w5TU9ROWpWdGoybVdsQmNQZTJ6bjFKWGV3U1NEOHVlZk56TApSejNyQTBCTXJueXBpQUlTKzdJb3cySjRvalk1SURldUk2SGV0N1ZwZ2sxNy80QlBkNGtMY3FCYjc1a0hXRlVUCmFHdDhNUk5ydDBlbDhIZm9jTjY5dFVSa082QzFXVlhkSFpkeWVoeHBnZTBldHRNb1U5Qm1oVnYyZWU0PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls-private-key-file: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBd1VWcG9pb3pXUHVlS1NQZ3p3MWFBQUVvVGdTd0ZVdkJrakhTN0c2RlpwanZLdUVqCkZMMFF2MUYvbHZLTUJMcTFqanVPbmxxOUZwK29CMjFHRDRTYk5vMjJEOGtkN1hTci9qNHV4SjY3WDQrSWlQUFYKeVBqQTJSRkkwMmFxZm5iUWhxME5XRHBXT2dSMzZpUGFRRG1TaC8xRFhzUGw2QU1vK1U3UFVFSVJNVEVxS1BjeQp4b2htcjd1UTVWT056NGZoeEsrY3U3VG9ZVlJKSTNGQUpIYTN6aWx2SVdPQ2tnTnEzRmlQeU9zaGI0VnJjU3NhCnhZbVc5WlkyVmk1T1lxblowekVqcnF6N3lUZ1FQRytZQ2NzMlRVNVdDU2g5TTVDL1E2Y0I1bll1RjVGYkdydUEKWGtPWkFZazJmWmhaaWRVUWRwcDJtYXZSVmZOc2h1ZUd2emQ5WHdJREFRQUJBb0lCQUcyZVpBcUJLdngyUWorTgpSTzNLNGRnTTBBSm9NRUx6NDhkNmtPcGV5VFRtMndnVUI2UzBrM0lmMUdFV0VvcUFKNGVUaWhHUTM1eWNVMTViCkFSaStHcGEzaTZLcWJGb0pDYUE3UHFWd2JsQUdCZWUvZk9ydkE5cGFMbGNRN1BTcmlSeEp2TDdrMzVFcWhhVDgKVHNhTW9PcVdvQVo0ejhablBHOGkzdnpqYkFMY3BGR2tVckNjSjZ1cWRzdnQ1MW8rWUUvUFRUYmo2c2RhVlRkbwozeXBNV3pHNXJ4SzBsUzVEMjJ3N0FLRUZTWDY3OEpHYmxZOE1ocFZOSUxYdTh2VmQwVWd5Zk9KVjJYUnZhUkIrCkZ3ZFh6Y1B5UitKT0dSc1UrV2p0Q3FxREdCVzFla2RvTGNDUGJFaVkwMWV1STNrcUd0emRxQW1qcmVxbWVCeDEKcGRkUFNKRUNnWUVBd3gwd1RJaDkycG56cmxLK2lSeDNPWEs5Si9rUk9aVXZKeXNhTGpuUUZXK3FJOGgyTEZWdApySnoraWRaeFpFSk04UXJpU1RtdzVidEZESjFqSTA4K0ZxZlZldG5MOXhCOEN1NTNCK25CcmVNSmNQcUExeVkxCmRLUnUvSEdtUU9URlB5NzB3V1FnWUxZZnVGUVJERGtkMGtpQmdiam5hZTlWb1VsN2hWaFpvaWNDZ1lFQS9aVUIKTWtGd0Jzc29nNzNWeUZqT0E2SitpRTMyM0VjbHo0TkNUU3dGQXZQL0Fvak5OMXptSGgxNlgzT2RyZHdQWnNSLwpyOVJoZFdva21ub1RRMWdDMGIvTnoveGltYmpLWFBOSm50VStuaWpNMVZLMmxYc0liN2t2MnlVazNpaUxvZGtmCmVtazVvYTVCUFBxMDcwK3pER2hESkFFYW9pRzFXWEh1UkF4cEpna0NnWUF4Rk5pZmgvNVF6VVYxWnE4emdvdWoKVWUrdmJJSWV3QjU2ZGVkQ0ZaejRwM3hmUUFBcUt0dEovcnd4SkZhbDU5Ky9Dd1BkYzd2Q0xwZXlFcTFycG5WeAo4WXBNT3htSjd3V2xJbE9qRS9SNnI1QWljWUdUbmJMNHdweUF1SDRmK094OWRteHZjYWFMYllVUk0yU09kSmZCCjNDZG40SUdtTG1TV0RBd2NnUnNiSlFLQmdGS3l6bklTVHpPWCs3MkRJbjQxSC9LbGdyaDNIS1BYL0NmQnVkU3IKSDNOSUdZazlEaGdaRHQ4UlpBQlBGMFJFK1N6ZHRucWtPNmhzRmtYZXUvdUJiMkh5T0crMDhuOEplYzE0ZGpENwpnSEZhQXZzcS8ycWVkakRoWnc4RC9STUtqQWNiWlIycHhXYktDbktWbkg1VE1xUkFPRzA4Z3ZBUEtESmthbno4Cnd5bnBBb0dCQUovUFhMR3kyVTM0NmdWZitlcWFmdTRGWFVsYUYwTUkxdDJSMExmc1RCWk93S3Azd29vTlBZNXcKaG9HcHJxYVpDT3RSR2IvRmJZaWprQUw1U2pGM0tVeE5aOG5MNTg1d2xEVCsvV1p5bGFvRUxiT1Z1OXFmbFdpbgpaUEErVUp3aG81WU1hWlgwaHdoZmJWcTVMeFl5dzFFSHQzQ05nSUlEYjFxUTNYYmgzTjBLCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
kind: Secret
metadata:
  creationTimestamp: null
  name: couchbase-operator-admission
  namespace: default

---
apiVersion: apps/v1
kind: Deployment
metadata:
  creationTimestamp: null
  name: couchbase-operator-admission
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: couchbase-operator-admission
  strategy: {}
  template:
    metadata:
      creationTimestamp: null
      labels:
        app: couchbase-operator-admission
    spec:
      containers:
      - args:
        - --logtostderr
        - --stderrthreshold
        - "0"
        - --tls-cert-file
        - /var/run/secrets/couchbase.com/couchbase-operator-admission/tls-cert-file
        - --tls-private-key-file
        - /var/run/secrets/couchbase.com/couchbase-operator-admission/tls-private-key-file
        command:
        - couchbase-operator-admission
        image: couchbase/admission-controller:2.0.2
        name: couchbase-operator-admission
        ports:
        - containerPort: 8443
          name: https
        readinessProbe:
          httpGet:
            path: /readyz
            port: https
            scheme: HTTPS
        resources: {}
        volumeMounts:
        - mountPath: /var/run/secrets/couchbase.com/couchbase-operator-admission
          name: couchbase-operator-admission
          readOnly: true
      serviceAccountName: couchbase-operator-admission
      volumes:
      - name: couchbase-operator-admission
        secret:
          secretName: couchbase-operator-admission
status: {}

---
apiVersion: v1
kind: Service
metadata:
  creationTimestamp: null
  name: couchbase-operator-admission
  namespace: default
spec:
  ports:
  - port: 443
    protocol: TCP
    targetPort: 8443
  selector:
    app: couchbase-operator-admission
status:
  loadBalancer: {}

---
apiVersion: admissionregistration.k8s.io/v1beta1
kind: MutatingWebhookConfiguration
metadata:
  creationTimestamp: null
  name: couchbase-operator-admission
webhooks:
- clientConfig:
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJRENDQWdpZ0F3SUJBZ0lRQlNLVWt5TGxRd3NibWFMTTNUS0ZjVEFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5amIzVmphR0poYzJVdGIzQmxjbUYwYjNJdFlXUnRhWE56YVc5dUlFTkJNQjRYRFRJdwpNRGd5TkRFeU1UQXhNVm9YRFRNd01EZ3lNakV5TVRBeE1Wb3dLakVvTUNZR0ExVUVBeE1mWTI5MVkyaGlZWE5sCkxXOXdaWEpoZEc5eUxXRmtiV2x6YzJsdmJpQkRRVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBT1JKcmNtL3krdjJOOVpuLzNSaVpRN3ZCM0tscGUwWjYySkxVdjdESU91a3VGYXNySDRnUnNpbQp5NTJ6RmhKK1gvWHgvQVAvNnZVcDFyc1ZDc2luTUJDYTNmNFp6V2FYTXpRall3amdZTW1ycUdQcVcrWFNERW14ClhsYmN6NGpmOEtTYXVRVitaTkdvcjlvRlljckhYV0ovTmprZU1lQ2ExMy9mSlBoQzIyek9uYStzRy9UWVFDWHQKM2piMlpsTHlYbW1pRkVXWlBjNmVSL3d1Y0MwMzFBRzB5TGtXekN5a3h6dE5tMG5qQjZoRHIwdS83T1RkYTNPawpmL3l0Vy8xRytORVM2WFR4RlRFTWY3VmZYREYwVk5rVER6RExJSFF2ODRUQlYzWW80Z1QrS1hXeC8wYlFBWFNEClA3T2tOSUxYUUV6c1kwV1puYXNxOXVuS3VINnk4cVVDQXdFQUFhTkNNRUF3RGdZRFZSMFBBUUgvQkFRREFnRUcKTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3SFFZRFZSME9CQllFRkZ1ck1JeGtscVRqRGE3U3RKcW9qaTMvRzdhSgpNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUFtQUk5WXhCUitwMlkyM2owWG82R1dNRUpVU0Zyb1FwWC9wb0ZHCk4yZ3RlYlhLU1Jmek9Od1VHOFpScEJlWWZ2OWdGeFhhalFnclliOGFoMTdEbDArVFFVSXlrb1hZdGRWOUpURGQKUDFsVDlpd0s0RytBdHVJMzBCbkgxdmdKaDFtbENRV1A1RUwrU0JSQUJ6ZFNTMDRpaUdCRm55Zlh1WTdId3JoQwo5TEp6UkxTbmtDcDI5djVJWVZQRGJLUjM1UGM0ZW1VTitCRkRtdC90eFpPd29BOEhzVW9jREh2RjFWK1FtVjNjClpyOXlPYUtDNjZRR1hDRUpBTWxETlN6WDEwV0VOWEs2ck92T0JwS0duSHFuVDJydktwOFAvZkNkYy9rbUhpdTcKQTJoT1dDaXN3bGpZV28wQkZPSEo2MjNEQUNCWERYVzdqYWR5bWZwTThUZndXOVdJCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    service:
      name: couchbase-operator-admission
      namespace: default
      path: /couchbaseclusters/mutate
  name: couchbase-operator-admission.default.svc
  rules:
  - apiGroups:
    - couchbase.com
    apiVersions:
    - v1
    - v2
    operations:
    - CREATE
    - UPDATE
    resources:
    - couchbaseclusters
    - couchbasebuckets
    - couchbaseephemeralbuckets
    - couchbasememcachedbuckets
    - couchbasereplications
    - couchbaseusers
    - couchbasegroups
    - couchbaserolebindings
    - couchbasebackups
    - couchbasebackuprestores

---
apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingWebhookConfiguration
metadata:
  creationTimestamp: null
  name: couchbase-operator-admission
webhooks:
- clientConfig:
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJRENDQWdpZ0F3SUJBZ0lRQlNLVWt5TGxRd3NibWFMTTNUS0ZjVEFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5amIzVmphR0poYzJVdGIzQmxjbUYwYjNJdFlXUnRhWE56YVc5dUlFTkJNQjRYRFRJdwpNRGd5TkRFeU1UQXhNVm9YRFRNd01EZ3lNakV5TVRBeE1Wb3dLakVvTUNZR0ExVUVBeE1mWTI5MVkyaGlZWE5sCkxXOXdaWEpoZEc5eUxXRmtiV2x6YzJsdmJpQkRRVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBT1JKcmNtL3krdjJOOVpuLzNSaVpRN3ZCM0tscGUwWjYySkxVdjdESU91a3VGYXNySDRnUnNpbQp5NTJ6RmhKK1gvWHgvQVAvNnZVcDFyc1ZDc2luTUJDYTNmNFp6V2FYTXpRall3amdZTW1ycUdQcVcrWFNERW14ClhsYmN6NGpmOEtTYXVRVitaTkdvcjlvRlljckhYV0ovTmprZU1lQ2ExMy9mSlBoQzIyek9uYStzRy9UWVFDWHQKM2piMlpsTHlYbW1pRkVXWlBjNmVSL3d1Y0MwMzFBRzB5TGtXekN5a3h6dE5tMG5qQjZoRHIwdS83T1RkYTNPawpmL3l0Vy8xRytORVM2WFR4RlRFTWY3VmZYREYwVk5rVER6RExJSFF2ODRUQlYzWW80Z1QrS1hXeC8wYlFBWFNEClA3T2tOSUxYUUV6c1kwV1puYXNxOXVuS3VINnk4cVVDQXdFQUFhTkNNRUF3RGdZRFZSMFBBUUgvQkFRREFnRUcKTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3SFFZRFZSME9CQllFRkZ1ck1JeGtscVRqRGE3U3RKcW9qaTMvRzdhSgpNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUFtQUk5WXhCUitwMlkyM2owWG82R1dNRUpVU0Zyb1FwWC9wb0ZHCk4yZ3RlYlhLU1Jmek9Od1VHOFpScEJlWWZ2OWdGeFhhalFnclliOGFoMTdEbDArVFFVSXlrb1hZdGRWOUpURGQKUDFsVDlpd0s0RytBdHVJMzBCbkgxdmdKaDFtbENRV1A1RUwrU0JSQUJ6ZFNTMDRpaUdCRm55Zlh1WTdId3JoQwo5TEp6UkxTbmtDcDI5djVJWVZQRGJLUjM1UGM0ZW1VTitCRkRtdC90eFpPd29BOEhzVW9jREh2RjFWK1FtVjNjClpyOXlPYUtDNjZRR1hDRUpBTWxETlN6WDEwV0VOWEs2ck92T0JwS0duSHFuVDJydktwOFAvZkNkYy9rbUhpdTcKQTJoT1dDaXN3bGpZV28wQkZPSEo2MjNEQUNCWERYVzdqYWR5bWZwTThUZndXOVdJCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    service:
      name: couchbase-operator-admission
      namespace: default
      path: /couchbaseclusters/validate
  name: couchbase-operator-admission.default.svc
  rules:
  - apiGroups:
    - couchbase.com
    apiVersions:
    - v1
    - v2
    operations:
    - CREATE
    - UPDATE
    resources:
    - couchbaseclusters
    - couchbasebuckets
    - couchbaseephemeralbuckets
    - couchbasememcachedbuckets
    - couchbasereplications
    - couchbaseusers
    - couchbasegroups
    - couchbaserolebindings
    - couchbasebackups
    - couchbasebackuprestores

